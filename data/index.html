<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据可视化</title>

    <link rel="stylesheet" href="css/index.css">
    <script src="js/jquery.js"></script>
    <script>
        $(function () {
            $('.myscroll').myScroll({
                speed: 60, //数值越大，速度越慢
                rowHeight: 38 //li的高度
            });
        });

        $(document).ready(function () {
            var whei = $(window).width()
            $("html").css({ fontSize: whei / 22 });
            $(window).resize(function () {
                var whei = $(window).width();
                $("html").css({ fontSize: whei / 22 })
            });
        });
    </script>
</head>
<body>

<div class="main">
    <div class="header">
        <div class="header-left fl" id="time"></div>
        <div class="header-center fl">
            <div class="header-title">
                EHS数据可视化大屏中心
            </div>
            <div class="header-img"></div>
        </div>
        <div class="header-right fl"></div>
        <div class="header-bottom fl"></div>

    </div>

    <div class="center">
        <div class="center-left fl">
            <div class="left-top">
                <div class="title">基本信息</div>
                <div class="top-list">
                    <p>ehs系统中某某公司的安全信息概览</p>

                    <div class="top-gauges">
                        <div id="basicGauge1" style="width: 30%; height: 150px;"></div>
                        <div id="basicGauge2" style="width: 30%; height: 150px;"></div>
                        <div id="basicGauge3" style="width: 30%; height: 150px;"></div>
                    </div>
                </div>
            </div>
            
            <div class="left-cen">
                <div class="title">安全隐患类型趋势分析</div>
                <div id="hazardLineChart" style="width:100%; height:200px; margin-top: 0.1rem;"></div>
            </div>

            <div class="left-bottom">
                <div class="title">安全隐患类型</div>
                <div class="bottom-b">
                    <div id="chart3" class="allnav" style="margin-top: 10px;"></div>
                </div>
            </div>
        </div>
        <div class="center-cen fl">
            <div class="cen-top">
                <div class="top-title">
                    <ul>
                        <li>
                            <p>数量统计</p>
                            <span>3</span>
                            <span>6</span>
                            <span>5</span>
                            <b>个</b>
                        </li>
                        <li>
                            <p>同比上升</p>
                            <span>1</span>
                            <span>3</span>
                            <b>%</b>
                        </li>
                    </ul>
                </div>

                <div class="top-bottom">
                    <div id="chart1" class="allnav"></div>
                </div>
            </div>
            <div class="cen-bottom">
                <div class="title">安全巡检</div>
                <div class="bottom-b">
                    <div id="chart4" class="allnav"></div>
                </div>
            </div>
        </div>
        <div class="center-right fr">
            <div class="right-top">
                <div class="title">在线访客记录</div>

                <div class="echart wenzi">
                    <div class="gun">
                        <span>姓名</span>
                        <span>出入时间</span>
                        <span>离开时间</span>
                    </div>
                    <div id="FontScroll" class="myscroll">
                        <ul>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>1</b>张三
                                    </span>
                                    <span>8:00</span>
                                    <span>13:15</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>2</b>李四
                                    </span>
                                    <span>9:32</span>
                                    <span>18:00</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>3</b>王五
                                    </span>
                                    <span>8:00</span>
                                    <span>8:53</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>4</b>刘六
                                    </span>
                                    <span>8:00</span>
                                    <span>17:00</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>5</b>胡齐
                                    </span>
                                    <span>9:31</span>
                                    <span>18:20</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>6</b>小郭
                                    </span>
                                    <span>5:00</span>
                                    <span>17:20</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>7</b>严八
                                    </span>
                                    <span>8:00</span>
                                    <span>8:36</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>8</b>张以
                                    </span>
                                    <span>8:00</span>
                                    <span>9:00</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>9</b>和畅
                                    </span>
                                    <span>8:00</span>
                                    <span>10:45</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>10</b>王阳
                                    </span>
                                    <span>8:00</span>
                                    <span>8:18</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>11</b>李艳
                                    </span>
                                    <span>8:17</span>
                                    <span>12:00</span>
                                </div>
                            </li>
                            <li>
                                <div class="fontInner clearfix">
                                    <span>
                                        <b>12</b>章文
                                    </span>
                                    <span>9:38</span>
                                    <span>11:53</span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="right-cen">
                <div class="title">特种作业类型</div>
                <div id="chart2" class="allnav">安全事故类型</div>
            </div>
            <div class="right-bottom">
                <div class="title"></div>
                <div class="chat">
                    <div id="chart5" class="allnav"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="js/jquery.min.js"></script>
<script src="js/echarts.min.js"></script>
<script src="js/wodry.min.js"></script>
<script src="js/fontscroll.js"></script>
<script src="js/echarts.js"></script>

<script>
    //顶部时间
    function getTime(){
        var myDate = new Date();
        var myYear = myDate.getFullYear(); //获取完整的年份(4位,1970-????)
        var myMonth = myDate.getMonth()+1; //获取当前月份(0-11,0代表1月)
        var myToday = myDate.getDate(); //获取当前日(1-31)
        var myDay = myDate.getDay(); //获取当前星期X(0-6,0代表星期天)
        var myHour = myDate.getHours(); //获取当前小时数(0-23)
        var myMinute = myDate.getMinutes(); //获取当前分钟数(0-59)
        var mySecond = myDate.getSeconds(); //获取当前秒数(0-59)
        var week = ['星期日','星期一','星期二','星期三','星期四','星期五','星期六'];
        var nowTime;

        nowTime = myYear+'-'+fillZero(myMonth)+'-'+fillZero(myToday)+'&nbsp;&nbsp;'+fillZero(myHour)+':'+fillZero(myMinute)+':'+fillZero(mySecond)+'&nbsp;&nbsp;'+week[myDay]+'&nbsp;&nbsp;';
        //console.log(nowTime);
        $('#time').html(nowTime);
    };
    function fillZero(str){
        var realNum;
        if(str<10){
            realNum	= '0'+str;
        }else{
            realNum	= str;
        }
        return realNum;
    }
    setInterval(getTime,1000);
</script>

<script>
    var chart1 = echarts.init(document.getElementById('basicGauge1'));
    var chart2 = echarts.init(document.getElementById('basicGauge2'));
    var chart3 = echarts.init(document.getElementById('basicGauge3'));

    var gaugeOption = function(title, value, unit) {
        return {
            title: {
                text: title,
                left: 'center',
                top: '5%',
                textStyle: { 
                    color: '#fff', 
                    fontSize: 14,
                    fontWeight: 'normal'
                }
            },
            series: [{
                type: 'gauge',
                radius: '85%',
                center: ['50%', '65%'],
                detail: {
                    valueAnimation: true,
                    formatter: value + unit,
                    fontSize: 16,
                    color: '#fff',
                    offsetCenter: [0, '60%']
                },
                axisLine: {
                    lineStyle: {
                        width: 8,
                        color: [[0.3, '#67e0e3'], [0.7, '#37a2da'], [1, '#fd666d']]
                    }
                },
                pointer: {
                    length: '60%',
                    width: 4
                },
                axisTick: {
                    distance: -8,
                    length: 4
                },
                splitLine: {
                    distance: -8,
                    length: 8
                },
                data: [{ value: value }]
            }]
        }
    };

    chart1.setOption(gaugeOption('安全巡检', 4, '次'));
    chart2.setOption(gaugeOption('整改率', 89, '%'));
    chart3.setOption(gaugeOption('作业许可证', 534, '张'));
</script>

<script>
    var chart = echarts.init(document.getElementById('hazardLineChart'));

    var categories = ['火灾隐患', '高处作业', '电气安全', '机械伤害', '化学品泄漏'];

    var rectifying = [12, 9, 11, 7, 5];
    var completed = [10, 8, 10, 6, 4];
    var overdue = [6, 5, 6, 3, 2];

    chart.setOption({
        tooltip: { 
            trigger: 'axis',
            backgroundColor: 'rgba(0,0,0,0.7)',
            borderColor: '#217093',
            textStyle: {
                color: '#fff'
            }
        },
        legend: {
            data: ['整改中', '已完成', '已逾期'],
            top: 10,
            textStyle: { color: '#fff' },
            itemGap: 20,
            padding: [5, 10],
            backgroundColor: 'rgba(0,0,0,0.2)',
            borderRadius: 5
        },
        grid: {
            left: '5%',
            right: '5%',
            bottom: '10%',
            top: '25%',
            containLabel: true
        },
        xAxis: {
            type: 'category',
            data: categories,
            axisLabel: { 
                color: '#fff',
                interval: 0,
                rotate: 30,
                fontSize: 12
            }
        },
        yAxis: {
            type: 'value',
            axisLabel: { color: '#fff' },
            splitLine: {
                lineStyle: {
                    color: 'rgba(255,255,255,0.1)'
                }
            }
        },
        series: [
            {
                name: '整改中',
                type: 'bar',
                data: rectifying,
                barGap: 0,
                itemStyle: {
                    color: '#37a2da'
                }
            },
            {
                name: '已完成',
                type: 'bar',
                data: completed,
                itemStyle: {
                    color: '#67e0e3'
                }
            },
            {
                name: '已逾期',
                type: 'line',
                data: overdue,
                symbolSize: 8,
                lineStyle: {
                    width: 3,
                    color: '#fd666d'
                },
                itemStyle: {
                    color: '#fd666d'
                }
            }
        ]
    });
</script>
</body>
</html>
